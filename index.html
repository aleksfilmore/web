<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to the Carnival of Bad Dates</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Knewave&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

    <!-- Custom Styles & Animations -->
    <style>
        /* Define custom color palette and fonts for Tailwind */
        :root {
            --color-red: #E63946;
            --color-teal: #457B9D;
            --color-gold: #F4A261;
            --color-cream: #F1FAEE;
            --font-headline: 'Knewave', cursive;
            --font-body: 'Montserrat', sans-serif;
        }

        body {
            background-color: var(--color-cream);
            font-family: var(--font-body);
            color: #1D3557; /* A darker teal for text */
            overflow-x: hidden;
            /* Vintage grain texture overlay */
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXWBgYGHh4d5eXlzc3OLi4ubm5uVlZWPj4+NjY19fX2JiYl/f39ra2uRkZGZmZlpaWmXl5dvb29xcXGTk5NnZ2c8TV1mAAAAG3RSTlNAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAvEOwtAAAFVklEQVR4XpWWB67c2BUFb3g557T/hRo9/WUMZHlgr4Bg8Z4qQgQJlHI4A8SzFVrapvmTF9O7dmYRFZ60YiBhJRCgh1FYhiLAmdvX0CzTOpNE77ME0Zty/nWWzchDtiqrmQYF5HZ1APAC5TEIO/BNvyyGgXDwnRFVx8銓/big" alt="Book Cover for The Worst Boyfriends Ever" class="w-full h-auto object-cover transform group-hover:scale-105 transition-transform duration-500">
                </div>
            </div>

            <!-- Right Column: Book Details -->
            <div class="w-full lg:w-1/2 p-8 flex items-center justify-center">
                <div class="carnival-frame p-8 md:p-12 text-center relative max-w-lg">
                    <h3 class="text-4xl md:text-5xl font-headline text-red-custom mb-4">The Worst Boyfriends Ever</h3>
                    
                    <div class="text-left text-lg">
                        <h4 class="text-2xl font-headline text-teal-custom mb-3 text-center">Inside the Chaos</h4>
                        <p class="mb-4">The Worst Boyfriends Ever isn’t just a memoir — it’s a breakup battle cry in bold font and eyeliner. Readers call it “hilarious,” “relatable,” and “the perfect read for a long flight — or a long string of mistakes.”</p>
                        <p class="mb-4">Told with zero apologies and maximum emotional whiplash, this book isn’t here to fix you. It’s here to fuel you. Because healing sometimes means making a list. Sometimes it means setting it on fire.</p>
                        <p class="italic mb-6">You won’t just relate. You’ll feel seen. Then vindicated. Then a little dangerous.</p>
                    </div>

                    <div class="text-left space-y-2 mb-8">
                        <p><strong>Release Date:</strong> Available Now!</p>
                        <p><strong>Formats:</strong> Paperback / Hardcover / eBook</p>
                        <p><strong>Price:</strong> $18.99 (Paperback)</p>
                    </div>
                    <a href="https://a.co/d/3gteCs1" target="_blank" rel="noopener noreferrer" class="ticket-stub-btn">Buy The Book</a>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. Praise Carousel -->
    <section id="praise" class="py-16 md:py-24 bg-teal-custom bg-opacity-10 overflow-hidden">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-headline text-teal-custom mb-12">What the Crowd's Saying</h2>
            <div class="relative max-w-3xl mx-auto">
                <div id="praiseCarousel" class="flex transition-transform duration-500 ease-in-out">
                    <!-- Carousel Items -->
                    <div class="carousel-item min-w-full px-4">
                        <div class="ticket-card">
                            <p class="text-xl md:text-2xl italic">“A hilariously raw and painfully honest LGBTQ+ memoir that turns romantic disasters into healing gold.”</p>
                        </div>
                    </div>
                    <div class="carousel-item min-w-full px-4">
                        <div class="ticket-card">
                            <p class="text-xl md:text-2xl italic">“Fun, engaging, and totally unputdownable.”</p>
                        </div>
                    </div>
                    <div class="carousel-item min-w-full px-4">
                        <div class="ticket-card">
                            <p class="text-xl md:text-2xl italic">“Like swapping tales with a brutally honest friend—wild, messy, and uplifting.”</p>
                        </div>
                    </div>
                     <div class="carousel-item min-w-full px-4">
                        <div class="ticket-card">
                            <p class="text-xl md:text-2xl italic">“Easy, funny, super relatable, and witty.”</p>
                        </div>
                    </div>
                     <div class="carousel-item min-w-full px-4">
                        <div class="ticket-card">
                            <p class="text-xl md:text-2xl italic">“Equal parts cringe and catharsis—I devoured it.”</p>
                        </div>
                    </div>
                </div>
                <!-- Navigation -->
                <button id="prevPraise" class="carousel-nav left-0">
                    <svg class="w-12 h-12" viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" fill="var(--color-red)"></path><rect x="15" y="45" width="85" height="10" fill="var(--color-gold)" rx="5"></rect></svg>
                </button>
                <button id="nextPraise" class="carousel-nav right-0">
                    <svg class="w-12 h-12" viewBox="0 0 100 100"><path d="M 50,0 L 40,10 L 80,50 L 40,90 L 50,100 L 100,50 Z" fill="var(--color-red)"></path><rect x="0" y="45" width="85" height="10" fill="var(--color-gold)" rx="5"></rect></svg>
                </button>
            </div>
        </div>
    </section>

    <!-- 5. Audiobook Spotlight -->
    <section id="audiobook" class="py-16 md:py-24">
        <div class="container mx-auto px-4">
            <div class="midway-booth max-w-4xl mx-auto flex flex-col md:flex-row items-center gap-8">
                <div class="w-full md:w-1/3 flex justify-center">
                    <img src="https://aleksfilmore.com/The%20Worst%20Boyfriends%20Ever%20KINDLE.jpg" alt="Audiobook Cover" class="rounded-lg shadow-2xl w-48 h-48 md:w-64 md:h-64 object-cover">
                </div>
                <div class="w-full md:w-2/3 text-center md:text-left">
                    <h2 class="text-4xl md:text-5xl font-headline text-red-custom mb-4">Hear the Circus</h2>
                    <p class="text-lg md:text-xl mb-2">Narrated by the incredible <span class="font-bold text-teal-custom">Deacon Deane</span>, the audiobook drops this month on Spotify!</p>
                    <p class="mb-4 text-xl italic text-teal-custom font-headline">Dating is War.<br>Laughter is Armor.</p>
                    <p class="mb-6">Join readers around the world who are laughing through the cringe and reclaiming their dating lives—one bad ex at a time.</p>
                    <button class="golden-coin-btn">
                        <span class="coin-text">Pre-Save on Spotify</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- 6. Attraction #1: Bad Date Bingo -->
    <section id="bingo" class="py-16 md:py-24 bg-red-custom bg-opacity-10">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-headline text-red-custom mb-4">Attraction #1</h2>
            <h3 class="text-3xl font-headline text-teal-custom mb-12">Bad Date Bingo</h3>
            <div class="midway-booth max-w-2xl mx-auto p-4 md:p-8">
                <div id="bingo-board" class="grid grid-cols-5 gap-2 md:gap-4">
                    <!-- Bingo tiles will be generated by JS -->
                </div>
            </div>
        </div>
    </section>

    <!-- 7. Attraction #2: Mugshot Gallery (The Rogues' Gallery) -->
    <section id="gallery" class="py-16 md:py-24">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-headline text-red-custom mb-4">Attraction #2</h2>
            <h3 class="text-3xl font-headline text-teal-custom mb-12">The Rogues' Gallery</h3>
            <div class="relative max-w-5xl mx-auto">
                <div id="galleryCarousel" class="flex transition-transform duration-500 ease-in-out">
                    <!-- Gallery items will be populated by JavaScript -->
                </div>
                 <!-- Navigation -->
                <button id="prevGallery" class="carousel-nav left-0">
                    <svg class="w-12 h-12" viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" fill="var(--color-red)"></path><rect x="15" y="45" width="85" height="10" fill="var(--color-gold)" rx="5"></rect></svg>
                </button>
                <button id="nextGallery" class="carousel-nav right-0">
                    <svg class="w-12 h-12" viewBox="0 0 100 100"><path d="M 50,0 L 40,10 L 80,50 L 40,90 L 50,100 L 100,50 Z" fill="var(--color-red)"></path><rect x="0" y="45" width="85" height="10" fill="var(--color-gold)" rx="5"></rect></svg>
                </button>
            </div>
        </div>
    </section>

    <!-- 8. Attraction #3: Spot the Red Flags Quiz -->
    <section id="quiz" class="py-16 md:py-24 bg-teal-custom bg-opacity-10">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl md:text-5xl font-headline text-red-custom mb-4">Attraction #3</h2>
            <h3 class="text-3xl font-headline text-teal-custom mb-12">Red Flag Meter</h3>
            <div id="quiz-container" class="midway-booth max-w-3xl mx-auto p-8">
                <!-- Quiz content will be generated by JS -->
            </div>
        </div>
    </section>

    <!-- 9. Author Booth & Final CTA -->
    <section id="author" class="py-16 md:py-24">
        <div class="container mx-auto px-4">
            <div class="funhouse-stall max-w-4xl mx-auto flex flex-col md:flex-row items-center gap-8 text-center">
                <div class="w-full md:w-1/3 flex justify-center">
                    <img src="https://aleksfilmore.com/AF.png" alt="Portrait of Aleks Filmore" class="rounded-full shadow-2xl w-48 h-48 md:w-64 md:h-64 object-cover border-4 border-gold-custom">
                </div>
                <div class="w-full md:w-2/3">
                    <h2 class="text-4xl md:text-5xl font-headline text-teal-custom mb-4">Meet the Ringleader</h2>
                    <p class="text-lg md:text-xl mb-6 text-left">Aleks Filmore writes books for the beautifully broken, the hilariously heart-bruised, and anyone who's ever asked “Was it just me?” after a bad date. With a background in storytelling, queer identity, and emotional chaos (both lived and observed), his writing blends humor, honesty, and a touch of poetic rage. His work spans raw memoir and queer gothic fiction, from the dating disasters of The Worst Boyfriends Ever to the fog-drenched mystery of Fogbound Hearts. Aleks tells stories that hold space for heartbreak, healing, and the messy, resilient ways we keep going.</p>
                    <div class="flex justify-center gap-4">
                        <!-- Social Icons as Prizes -->
                        <a href="https://www.instagram.com/aleksfilmore" target="_blank" rel="noopener noreferrer" class="social-prize"><svg viewBox="0 0 24 24" class="w-8 h-8"><path fill="currentColor" d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"></path></svg></a>
                        <a href="https://www.tiktok.com/@aleksfilmore" target="_blank" rel="noopener noreferrer" class="social-prize"><svg viewBox="0 0 24 24" class="w-8 h-8"><path fill="currentColor" d="M12.28.22a1.46,1.46,0,0,0-1.4-1.48A1.47,1.47,0,0,0,9.41.22V12.63a3.89,3.89,0,1,1-3.88-3.89,1.47,1.47,0,0,0,1.47-1.47A1.48,1.48,0,0,0,5.53,5.8,6.84,6.84,0,1,0,12.37,12.6V4.75a3.86,3.86,0,0,1,3.88-3.88,3.78,3.78,0,0,1,3.88,3.88V12.2a9.14,9.14,0,0,0-1.47-.1,1.47,1.47,0,0,0-1.47,1.47,1.4,1.4,0,0,0,1.47,1.47,1.52,1.52,0,0,0,.1-.05,6.84,6.84,0,0,0,5.35-6.78V.22a1.46,1.46,0,0,0-1.4-1.48A1.47,1.47,0,0,0,21.2.22Z"/></svg></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-teal-custom text-cream-custom py-8 relative">
        <div class="tightrope"></div>
        <div class="container mx-auto px-4 text-center">
            <div class="flex flex-col md:flex-row justify-center items-center gap-4 md:gap-8 mb-4">
                <a href="#" class="hover:text-gold-custom transition-colors">Privacy Policy</a>
                <a href="#" class="hover:text-gold-custom transition-colors">Terms of Service</a>
                <a href="#" class="hover:text-gold-custom transition-colors">Contact</a>
            </div>
            <a href="https://a.co/d/3gteCs1" target="_blank" rel="noopener noreferrer" class="ticket-stub-btn-sm">Buy on Amazon</a>
            <p class="mt-4 text-sm opacity-70">&copy; 2025 Aleks Filmore. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Modals and Pop-ups -->
    <!-- Bingo Win Modal -->
    <div id="bingo-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div class="midway-booth max-w-md w-full text-center p-8 relative">
            <button id="close-bingo-modal" class="absolute top-2 right-2 text-2xl font-bold text-red-custom">&times;</button>
            <h2 class="text-6xl font-headline text-gold-custom animate-pulse">BINGO!</h2>
            <p class="text-xl my-4">You've got a keen eye for chaos!</p>
            <p class="mb-6">As a reward, use code <strong class="text-red-custom text-2xl">CARNIVAL15</strong> for 15% off your book purchase!</p>
            <a href="https://a.co/d/3gteCs1" target="_blank" rel="noopener noreferrer" class="ticket-stub-btn">Claim My Prize!</a>
        </div>
    </div>

    <!-- Gallery Lightbox -->
    <div id="gallery-lightbox" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div class="midway-booth max-w-lg w-full text-center p-8 relative">
            <button id="close-lightbox-modal" class="absolute top-2 right-2 text-2xl font-bold text-red-custom">&times;</button>
            <img id="lightbox-img" src="" alt="Mugshot detail" class="w-full h-auto max-w-xs mx-auto mb-4 rounded-lg">
            <h3 id="lightbox-caption" class="polaroid-caption text-lg mb-4"></h3>
            <p id="lightbox-excerpt" class="text-left italic"></p>
        </div>
    </div>

    <!-- Exit Intent Pop-up -->
    <div id="exit-intent-popup" class="fixed inset-0 bg-black bg-opacity-75 items-center justify-center p-4 z-50 hidden">
        <div class="carnival-frame max-w-md w-full text-center p-8 relative transform scale-0 transition-transform duration-300">
             <button id="close-exit-popup" class="absolute top-2 right-2 text-2xl font-bold text-red-custom">&times;</button>
            <h2 class="text-4xl font-headline text-red-custom mb-4">Wait! Don't Leave!</h2>
            <p class="text-xl mb-6">Don't leave empty-handed! Grab this ticket for <strong class="text-teal-custom">10% off</strong> the paperback.</p>
            <a href="https://a.co/d/3gteCs1" target="_blank" rel="noopener noreferrer" class="ticket-stub-btn">Grab My Ticket</a>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function() {

        // --- Configuration ---
        const BINGO_TILES_DATA = [
            "Dog needed 'emotional support'", "Mansplained my job to me", "Lied about ex being dead", "Showed up 30 mins late", "Talked about their crypto",
            "Gave a date itinerary", "Claimed to be 'an empath'", "Pawned family heirloom", "Bragged about exes", "Brought weird kink items",
            "Shirtless karaoke", "Bathtub full of newspapers", "Free Space!", "Split the bill... to the cent", "Overshared about their mom",
            "Had a questionable tattoo", "Lied about owning a Dalí", "Turned a date into a race", "Name-dropped constantly", "Vaped indoors",
            "2 a.m. 'u up?' text", "Kept six toasters", "Sobbed over dessert", "Ghosted mid-text", "Gave a 'backhanded' compliment"
        ];

        const QUIZ_QUESTIONS = [
            {
                question: "He needs your credit card for a 'sure-thing' poker tournament. You…",
                options: [
                    { text: "Hand it over—high-risk, high love!", points: 1 },
                    { text: "Ask when you’ll be repaid.", points: 2 },
                    { text: "Laugh and change your PIN.", points: 3 }
                ]
            },
            {
                question: "His dog Daisy wedges herself between you at dinner. You…",
                options: [
                    { text: "Offer Daisy your chair.", points: 1 },
                    { text: "Scoot over; at least the lab’s cute.", points: 2 },
                    { text: "Realize you’re the third wheel.", points: 3 }
                ]
            },
            {
                question: "He ghosts, then texts: 'Dropped my phone in a lake!' Your reply?",
                options: [
                    { text: "'Aww, glad you’re OK! See you soon?'", points: 1 },
                    { text: "'Phones swim worse than excuses.'", points: 2 },
                    { text: "Silence and a swift block.", points: 3 }
                ]
            }
        ];

        const MUGSHOT_DATA = [
            { name: "The Gambler", charge: "Maxed my card on 'a sure-thing tournament.'", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/THE%20GAMBLER.png" }, { name: "The Ghoster", charge: "Evaporated for ten days, re-materialised with 'u up?'", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Ghoster.png" }, { name: "The Party Animal", charge: "Hijacked the karaoke mic—shirtless Viking helmet.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Party%20Animal.png" }, { name: "The Pet-Obsessed", charge: "Cancelled plans because the dog 'needed support.'", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Pet-Obsessed.png" }, { name: "The Crier", charge: "Burst into tears when I declined tiramisu.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Crier.png" }, { name: "The Liar", charge: "Swore his family owned a secret Dalí.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Liar.png" }, { name: "The Kinkster", charge: "Produced 37 clothespins and a rubber chicken.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Kinkster.png" }, { name: "The Human Sloth", charge: "Considered charging his phone 'too much effort.'", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Human%20Sloth.png" }, { name: "The Fitness Fanatic", charge: "Did burpees over the picnic blanket.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Fitness%20Fanatic.png" }, { name: "The Perfectionist", charge: "Handed me a spreadsheet of my flaws.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Perfectionist.png" }, { name: "The Hoarder", charge: "Stored newspapers in the bathtub.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Hoarder.png" }, { name: "The Narcissist", charge: "Stole my moisturizer for his 'dewy glow.'", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Narcissist.png" }, { name: "The Late One", charge: "Turned up 58 minutes late, blamed 'traffic.'", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Late%20One.png" }, { name: "The Competitive", charge: "Trash-talked children at mini golf.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Competitive.png" }, { name: "The Conspiracist", charge: "Explained chem-trails between courses.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Conspiracist.png" }, { name: "The Wizard", charge: "Tried to banish a spider with Latin chants.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Wizard.png" }, { name: "The Planner", charge: "Scheduled 'spontaneous fun' in Google Calendar.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Planner.png" }, { name: "The Polyamorist", charge: "Color-coded lovers in iCal; I was 'Tuesday, 4 p.m.'", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Polyamorist.png" }, { name: "The Apologizer", charge: "Prefaced every sentence with 'I’m sorry.'", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20Apologizer.png" }, { name: "The One Who Got Away", charge: "Perfect, kind, emotionally available—terrified me so much I ghosted myself.", img: "https://raw.githubusercontent.com/aleksfilmore/web/main/mugs/The%20One%20Who%20Got%20Away.png" }
        ];

        // --- General Elements ---
        const body = document.body;

        // --- Hero Section: Confetti ---
        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                confetti.style.backgroundColor = ['var(--color-red)', 'var(--color-teal)', 'var(--color-gold)'][Math.floor(Math.random() * 3)];
                body.appendChild(confetti);
            }
        }
        createConfetti();

        // --- Carousels ---
        function setupCarousel(carouselId, prevBtnId, nextBtnId) {
            const carousel = document.getElementById(carouselId);
            const prevBtn = document.getElementById(prevBtnId);
            const nextBtn = document.getElementById(nextBtnId);
            if (!carousel || !prevBtn || !nextBtn) return;
            
            const items = carousel.querySelectorAll('.carousel-item');
            if (items.length === 0) return; // Don't run if no items
            let currentIndex = 0;
            const totalItems = items.length;

            function updateCarousel() {
                carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
            }

            prevBtn.addEventListener('click', () => {
                currentIndex = (currentIndex - 1 + totalItems) % totalItems;
                updateCarousel();
            });

            nextBtn.addEventListener('click', () => {
                currentIndex = (currentIndex + 1) % totalItems;
                updateCarousel();
            });
        }
        setupCarousel('praiseCarousel', 'prevPraise', 'nextPraise');
        
        // --- Mugshot Gallery Population & Logic ---
        function populateGallery() {
            const galleryCarousel = document.getElementById('galleryCarousel');
            if (!galleryCarousel) return;

            MUGSHOT_DATA.forEach(mugshot => {
                const item = document.createElement('div');
                item.className = 'carousel-item min-w-full px-12 flex justify-center'; // Centering the card

                item.innerHTML = `
                    <div class="polaroid-card" data-excerpt="${mugshot.charge}" data-name="${mugshot.name}">
                        <img src="${mugshot.img}" alt="Mugshot of ${mugshot.name}" class="w-full h-auto" onerror="this.onerror=null;this.src='https://placehold.co/400x400/1D3557/F1FAEE?text=Image+Missing';">
                        <p class="polaroid-caption"><strong>${mugshot.name}:</strong> ${mugshot.charge}</p>
                    </div>
                `;
                galleryCarousel.appendChild(item);
            });
        }
        populateGallery();
        setupCarousel('galleryCarousel', 'prevGallery', 'nextGallery'); // Setup carousel AFTER populating it

        // --- Gallery Lightbox ---
        const galleryLightbox = document.getElementById('gallery-lightbox');
        const closeLightboxModal = document.getElementById('close-lightbox-modal');
        if (galleryLightbox && closeLightboxModal) {
            document.getElementById('galleryCarousel').addEventListener('click', (e) => {
                const card = e.target.closest('.polaroid-card');
                if (card) {
                    const img = card.querySelector('img');
                    const name = card.dataset.name;
                    const excerpt = card.dataset.excerpt;

                    document.getElementById('lightbox-img').src = img.src;
                    document.getElementById('lightbox-caption').textContent = name;
                    document.getElementById('lightbox-excerpt').textContent = `“${excerpt}”`;

                    galleryLightbox.classList.remove('hidden');
                    galleryLightbox.classList.add('flex');
                }
            });

            closeLightboxModal.addEventListener('click', () => {
                galleryLightbox.classList.add('hidden');
                galleryLightbox.classList.remove('flex');
            });
        }


        // --- Bad Date Bingo ---
        const bingoBoard = document.getElementById('bingo-board');
        const bingoModal = document.getElementById('bingo-modal');
        const closeBingoModal = document.getElementById('close-bingo-modal');
        if (bingoBoard && bingoModal && closeBingoModal) {
            let boardState = Array(25).fill(false);
            
            // Center tile is the free space
            BINGO_TILES_DATA[12] = "Free Space!";
            boardState[12] = true;

            BINGO_TILES_DATA.forEach((text, i) => {
                const tile = document.createElement('div');
                tile.className = 'bingo-tile';
                tile.dataset.index = i;
                if (i === 12) {
                    tile.classList.add('flipped');
                }
                
                const front = document.createElement('div');
                front.className = 'bingo-front';
                front.textContent = text;
                
                const back = document.createElement('div');
                back.className = 'bingo-back';

                tile.appendChild(front);
                tile.appendChild(back);
                bingoBoard.appendChild(tile);
            });

            bingoBoard.addEventListener('click', (e) => {
                const tile = e.target.closest('.bingo-tile');
                if (tile && !tile.classList.contains('flipped')) {
                    tile.classList.add('flipped');
                    boardState[tile.dataset.index] = true;
                    checkBingoWin();
                }
            });

            function checkBingoWin() {
                const lines = [
                    // Rows
                    [0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [10, 11, 12, 13, 14], [15, 16, 17, 18, 19], [20, 21, 22, 23, 24],
                    // Cols
                    [0, 5, 10, 15, 20], [1, 6, 11, 16, 21], [2, 7, 12, 17, 22], [3, 8, 13, 18, 23], [4, 9, 14, 19, 24],
                    // Diagonals
                    [0, 6, 12, 18, 24], [4, 8, 12, 16, 20]
                ];

                for (const line of lines) {
                    if (line.every(index => boardState[index])) {
                        bingoModal.classList.remove('hidden');
                        bingoModal.classList.add('flex');
                        return;
                    }
                }
            }

            closeBingoModal.addEventListener('click', () => {
                bingoModal.classList.add('hidden');
                bingoModal.classList.remove('flex');
            });
        }

        // --- Red Flags Quiz ---
        const quizContainer = document.getElementById('quiz-container');
        if (quizContainer) {
            let currentQuestion = 0;
            let score = 0;

            function showQuestion() {
                const q = QUIZ_QUESTIONS[currentQuestion];
                quizContainer.innerHTML = `
                    <p class="text-xl md:text-2xl mb-8">${q.question}</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${q.options.map((opt, i) => `<button class="quiz-option" data-points="${opt.points}">${opt.text}</button>`).join('')}
                    </div>
                `;
            }

            quizContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('quiz-option')) {
                    score += parseInt(e.target.dataset.points);
                    currentQuestion++;
                    if (currentQuestion < QUIZ_QUESTIONS.length) {
                        showQuestion();
                    } else {
                        showResults();
                    }
                }
                 if (e.target.id === 'retake-quiz') {
                    currentQuestion = 0;
                    score = 0;
                    showQuestion();
                }
            });

            function showResults() {
                let title, blurb;
                if (score <= 4) { // Low Score
                    title = "Red-Flag Rookie!";
                    blurb = "Bless your heart! You're an optimist, but maybe read up on those 'warning signs' before your next date. There's a reason they're called red flags, not 'adorable quirks'!";
                } else if (score <= 7) { // Medium Score
                    title = "Seasoned Survivor!";
                    blurb = "You've seen some things, haven't you? You know a red flag when you see one, but sometimes you still get a little curious. Keep your wits about you, seasoned pro!";
                } else { // High Score
                    title = "Queen/King of Green Flags!";
                    blurb = "Bow down! You're practically a black belt in spotting bad vibes. Your radar is impeccable, and your boundaries are fortress-level. Go forth and conquer the dating world (or enjoy your peace and quiet)!";
                }

                quizContainer.innerHTML = `
                    <h4 class="text-3xl font-headline text-gold-custom mb-4">${title}</h4>
                    <p class="text-xl mb-8">${blurb}</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <a href="https://a.co/d/3gteCs1" target="_blank" rel="noopener noreferrer" class="ticket-stub-btn">Buy The Guide</a>
                        <button id="retake-quiz" class="quiz-option">Play Again</button>
                    </div>
                `;
            }
            showQuestion();
        }

        // --- Exit Intent Pop-up ---
        const exitPopup = document.getElementById('exit-intent-popup');
        const closeExitPopup = document.getElementById('close-exit-popup');
        if(exitPopup && closeExitPopup) {
            const showExitPopup = () => {
                exitPopup.classList.remove('hidden');
                exitPopup.classList.add('flex');
                setTimeout(() => {
                    exitPopup.querySelector('.carnival-frame').classList.add('scale-100');
                }, 10);
                document.removeEventListener('mouseout', handleMouseOut);
            };

            const handleMouseOut = (e) => {
                if (!e.toElement && !e.relatedTarget) {
                    showExitPopup();
                }
            };
            
            document.addEventListener('mouseout', handleMouseOut);

            closeExitPopup.addEventListener('click', () => {
                exitPopup.querySelector('.carnival-frame').classList.remove('scale-100');
                setTimeout(() => {
                    exitPopup.classList.add('hidden');
                    exitPopup.classList.remove('flex');
                }, 300);
            });
        }

    });
    </script>
</body>
</html>
